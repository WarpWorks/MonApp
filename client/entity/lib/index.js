const utils = require('./../../utils');

const template = require("./../templates/index.hbs");

(($) => {
    $(document).ready(() => {
        utils.getCurrentPageHAL($)
            .then((result) => {
                console.log("initial load: data=", result.data);
                // const data = {"_links": {"self": {"href": "/entity/HotSpot/58b75b9810d3e0278c2772ed"}, "i3c_homepage": {"href": "/", "title": "Home page"}, "i3c_login": {"href": "/session", "title": "Login"}}, "_embedded": {"panels": [{"_links": {"self": {"href": "[undefined]"}}, "_embedded": {"panelItems": [{"_links": {"self": {"href": "[undefined]"}}, "type": "BasicPropertyPanelItem", "id": 354, "name": "Name", "desc": "Tooltip for Name", "label": "Name", "position": "0"}, {"_links": {"self": {"href": "[undefined]"}}, "type": "SeparatorPanelItem", "id": 355, "name": "Separator", "desc": "---------", "position": "1"}, {"_links": {"self": {"href": "[undefined]"}}, "_embedded": {"relationships": [{"_links": {"self": {"href": "/entity/Relationship/22"}}, "_embedded": {"references": []}, "name": "ReadAccess"}]}, "type": "RelationshipPanelItem", "id": 356, "name": "ReadAccess", "desc": "Tooltip for ReadAccess", "position": "2", "label": "ReadAccess"}, {"_links": {"self": {"href": "[undefined]"}}, "_embedded": {"relationships": [{"_links": {"self": {"href": "/entity/Relationship/23"}}, "_embedded": {"references": []}, "name": "WriteAccess"}]}, "type": "RelationshipPanelItem", "id": 357, "name": "WriteAccess", "desc": "Tooltip for WriteAccess", "position": "3", "label": "WriteAccess"}, {"_links": {"self": {"href": "[undefined]"}}, "_embedded": {"relationships": [{"_links": {"self": {"href": "/entity/Relationship/78"}}, "_embedded": {"references": [{"_links": {"self": {"href": "/entity/IndustrySector/58b7550b17fa6d2418c8a80b"}}, "name": "Manufacturing"}]}, "name": "IndustrySector"}]}, "type": "RelationshipPanelItem", "id": 358, "name": "IndustrySector", "desc": "Tooltip for IndustrySector", "position": "4", "label": "IndustrySector"}, {"_links": {"self": {"href": "[undefined]"}}, "_embedded": {"relationships": [{"_links": {"self": {"href": "/entity/Relationship/79"}}, "_embedded": {"references": [{"_links": {"self": {"href": "/entity/IndustryVertical/58b75cba10d3e0278c2772f0"}}, "name": "Automotive"}, {"_links": {"self": {"href": "/entity/IndustryVertical/58b75ccd10d3e0278c2772f1"}}, "name": "Industrial"}, {"_links": {"self": {"href": "/entity/IndustryVertical/58b75caa10d3e0278c2772ef"}}, "name": "Aerospace"}]}, "name": "IndustryVerticals"}]}, "type": "RelationshipPanelItem", "id": 359, "name": "IndustryVerticals", "desc": "Tooltip for IndustryVerticals", "position": "5", "label": "IndustryVerticals"}, {"_links": {"self": {"href": "[undefined]"}}, "_embedded": {"relationships": [{"_links": {"self": {"href": "/entity/Relationship/80"}}, "_embedded": {"references": [{"_links": {"self": {"href": "/entity/ApplicationArea/58b757653c62e726a0eb38c6"}}, "name": "Asset Monitoring"}, {"_links": {"self": {"href": "/entity/ApplicationArea/58b757a03c62e726a0eb38c8"}}, "name": "Process Optimization"}, {"_links": {"self": {"href": "/entity/ApplicationArea/58b757ba3c62e726a0eb38c9"}}, "name": "Efficiency (!)"}]}, "name": "ApplicationArea"}]}, "type": "RelationshipPanelItem", "id": 360, "name": "ApplicationArea", "desc": "Tooltip for ApplicationArea", "position": "6", "label": "ApplicationArea"}, {"_links": {"self": {"href": "[undefined]"}}, "_embedded": {"relationships": [{"_links": {"self": {"href": "/entity/Relationship/81"}}, "_embedded": {"references": [{"_links": {"self": {"href": "/entity/UseCase/58b758703c62e726a0eb38cb"}}, "name": "Overall Equipment Efficiency (OEE)"}, {"_links": {"self": {"href": "/entity/UseCase/58b7594010d3e0278c2772d9"}}, "name": "Work Force Efficiency"}]}, "name": "UseCases"}]}, "type": "RelationshipPanelItem", "id": 361, "name": "UseCases", "desc": "Tooltip for UseCases", "position": "7", "label": "UseCases"}, {"_links": {"self": {"href": "[undefined]"}}, "_embedded": {"relationships": [{"_links": {"self": {"href": "/entity/Relationship/82"}}, "_embedded": {"references": [{"_links": {"self": {"href": "/entity/Technology/58b75ae010d3e0278c2772e7"}}, "name": "UWB"}, {"_links": {"self": {"href": "/entity/Technology/58b75b4a10d3e0278c2772ea"}}, "name": "Local Wireless Networks"}, {"_links": {"self": {"href": "/entity/Technology/58b75b7310d3e0278c2772ec"}}, "name": "IoT Networks"}]}, "name": "Technologies"}]}, "type": "RelationshipPanelItem", "id": 362, "name": "Technologies", "desc": "Tooltip for Technologies", "position": "8", "label": "Technologies"}, {"_links": {"self": {"href": "[undefined]"}}, "_embedded": {"relationships": [{"_links": {"self": {"href": "/entity/Relationship/83"}}, "_embedded": {"references": []}, "name": "Standards"}]}, "type": "RelationshipPanelItem", "id": 363, "name": "Standards", "desc": "Tooltip for Standards", "position": "9", "label": "Standards"}, {"_links": {"self": {"href": "[undefined]"}}, "_embedded": {"relationships": [{"_links": {"self": {"href": "/entity/Relationship/84"}}, "_embedded": {"references": []}, "name": "Testbeds"}]}, "type": "RelationshipPanelItem", "id": 364, "name": "Testbeds", "desc": "Tooltip for Testbeds", "position": "10", "label": "Testbeds"}, {"_links": {"self": {"href": "[undefined]"}}, "_embedded": {"relationships": [{"_links": {"self": {"href": "/entity/Relationship/85"}}, "_embedded": {"references": []}, "name": "ArchitecturePattern"}]}, "type": "RelationshipPanelItem", "id": 365, "name": "ArchitecturePattern", "desc": "Tooltip for ArchitecturePattern", "position": "11", "label": "ArchitecturePattern"}]}, "type": "Panel", "id": 353, "name": "Basics", "desc": "Properties, Enums and Associations", "label": "Basics", "position": "0"}, {"_links": {"self": {"href": "[undefined]"}}, "_embedded": {"panelItems": [{"_links": {"self": {"href": "[undefined]"}}, "_embedded": {"relationships": [{"_links": {"self": {"href": "/entity/Relationship/21"}}, "_embedded": {"references": []}, "name": "Overview"}]}, "type": "RelationshipPanelItem", "id": 367, "name": "Overview", "desc": "Tooltip", "position": 0, "label": "Overview"}]}, "type": "Panel", "id": 366, "name": "Overview", "desc": "Tooltip", "label": "Overview", "position": 1}]}, "name": "Track & Trace", "copyrightYear": 2017};
                // console.log(data);

                // const content = template(data);

                const content = template(result.data);
                $('#i3c-portal-placeholder').html(content);
            });
    });
})(jQuery);
